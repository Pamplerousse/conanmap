<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>Forteresse</title>

        <script src="jquery-3.1.1.js"></script>
        <script src="mapconan.js"></script>
        <script src="raphael.min.js"></script>

        <script type="text/javascript">

            var hash = window.location.hash;
            var debug = (hash == '#debug') ? true : false;

            var centerCoordonate = `{
                "ext1"  : {"x":128,"y":43},
                "ext2"  : {"x":581,"y":34},
                "ext3"  : {"x":73,"y":186},
                "ext4"  : {"x":45,"y":530},
                "ext5"  : {"x":26,"y":890},
                "ext6"  : {"x":550,"y":889},
                "ext7"  : {"x":1032,"y":879},
                "ext8"  : {"x":1016,"y":428},
                "ext9"  : {"x":1030,"y":29},
                "int1"  : {"x":264,"y":276},
                "int2"  : {"x":374,"y":398},
                "int3"  : {"x":545,"y":419},
                "int4"  : {"x":722,"y":349},
                "int5"  : {"x":339,"y":604},
                "salle1"  : {"x":501,"y":619},
                "salle2"  : {"x":706,"y":551},
                "remp1"  : {"x":454,"y":157},
                "remp2"  : {"x":649,"y":156},
                "remp3"  : {"x":894,"y":379},
                "remp4"  : {"x":889,"y":551},
                "remp5"  : {"x":656,"y":757},
                "remp6"  : {"x":419,"y":747},
                "remp7"  : {"x":157,"y":530},
                "remp8"  : {"x":166,"y":434},
                "tour1"  : {"x":798,"y":172},
                "tour2"  : {"x":893,"y":181},
                "tour3"  : {"x":847,"y":747},
                "tour4"  : {"x":935,"y":797},
                "tour5"  : {"x":122,"y":781},
                "tour6"  : {"x":195,"y":718},
                "debris1"  : {"x":269,"y":144},
                "debris2"  : {"x":170,"y":325},
                "debris3"  : {"x":795,"y":413},
                "debris4"  : {"x":969,"y":568}
                }`;

            var viewLine = `{
                "ext1" : {
                    "dest" : [
                        {"case" : "ext2"},
                        {"case" : "int1"},
                        {"case" : "ext3"},
                        {"case" : "debris1"},
                        {"case" : "debris2"},
                        {"case" : "ext4"}
                    ]
                },
                "ext2" : {
                    "dest" : [
                        {"case" : "ext1"}
                    ]
                },
				"ext3" : {
                    "dest" : [
                        {"case" : "ext1"},
                        {"case" : "int1"},
                        {"case" : "ext4"},
                        {"case" : "ext5"},
                        {"case" : "debris2"},
                        {"case" : "debris1"}
                    ]
                },
				"ext4" : {
                    "dest" : [
                        {"case" : "ext1"},
                        {"case" : "ext3"},
                        {"case" : "ext5"}
                    ]
                },
				"ext5" : {
                    "dest" : [
                        {"case" : "ext3"},
                        {"case" : "ext4"},
                        {"case" : "ext6"}
                    ]
                },
				"ext6" : {
                    "dest" : [
                        {"case" : "ext5"}
					]
                },
				"ext8" : {
                    "dest" : [
                        {"case" : "debris4"}
					]
                },
				"int1" : {
                    "dest" : [
                        {"case" : "ext1"},
                        {"case" : "ext3"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "debris1"},
                        {"case" : "debris2"},
                        {"case" : "debris3"}
					]
                },
				"int2" : {
                    "dest" : [
                        {"case" : "int1"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
						{"case" : "debris1"},
						{"case" : "debris2"},
						{"case" : "debris3"}
					]
                },
				"int3" : {
                    "dest" : [
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "salle2"},
						{"case" : "debris2"},
						{"case" : "debris3"}
					]
                },
				"int4" : {
                    "dest" : [
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
						{"case" : "debris2"},
						{"case" : "debris3"}
					]
                },
				"int5" : {
                    "dest" : [
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "debris1"},
                        {"case" : "tour6"}
					]
                },
				"salle2" : {
                    "dest" : [
                        {"case" : "int3"}
					]
                },
				"remp1" : {
                    "dest" : [
                        {"case" : "remp2"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "debris1"},
                        {"case" : "debris3"}
					]
                },
				"remp2" : {
                    "dest" : [
                        {"case" : "remp1"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "tour1"},
                        {"case" : "tour2"},
						{"case" : "debris3"}
					]
                },
				"remp3" : {
                    "dest" : [
                        {"case" : "remp4"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "tour2"},
                        {"case" : "debris3"}
					]
                },
				"remp4" : {
                    "dest" : [
                        {"case" : "remp3"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "tour3"},
                        {"case" : "debris3"},
                        {"case" : "debris4"}
					]
                },
				"remp5" : {
                    "dest" : [
                        {"case" : "remp6"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "tour3"}
					]
                },
				"remp6" : {
                    "dest" : [
                        {"case" : "remp5"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "tour6"}
					]
                },
				"remp7" : {
                    "dest" : [
                        {"case" : "remp8"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "tour6"},
                        {"case" : "debris1"},
                        {"case" : "debris2"},
                        {"case" : "debris3"}
					]
                },
				"remp8" : {
                    "dest" : [
                        {"case" : "remp7"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "int5"},
                        {"case" : "debris1"},
                        {"case" : "debris2"},
                        {"case" : "debris3"}
					]
                },
				"tour1" : {
                    "dest" : [
                        {"case" : "tour2"},
                        {"case" : "remp2"}
					]
                },
				"tour2" : {
                    "dest" : [
                        {"case" : "tour1"},
                        {"case" : "remp2"},
                        {"case" : "remp3"}
					]
                },
				"tour3" : {
                    "dest" : [
                        {"case" : "tour4"},
                        {"case" : "remp4"},
                        {"case" : "remp5"}
					]
                },
				"tour4" : {
                    "dest" : [
                        {"case" : "tour3"}
					]
                },
				"tour5" : {
                    "dest" : [
                        {"case" : "tour6"}
					]
                },
				"tour6" : {
                    "dest" : [
                        {"case" : "tour5"},
                        {"case" : "int5"},
                        {"case" : "remp6"},
                        {"case" : "remp7"}
					]
                },
				"debris1" : {
                    "dest" : [
                        {"case" : "ext1"},
                        {"case" : "ext3"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int5"},
                        {"case" : "debris2"},
                        {"case" : "remp1"}
					]
                },
				"debris2" : {
                    "dest" : [
                        {"case" : "remp8"},
                        {"case" : "ext1"},
                        {"case" : "ext3"},
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "debris1"},
                        {"case" : "debris3"}
					]
                },
				"debris3" : {
                    "dest" : [
                        {"case" : "int1"},
                        {"case" : "int2"},
                        {"case" : "int3"},
                        {"case" : "int4"},
                        {"case" : "remp3"}
					]
                },
				"debris4" : {
                    "dest" : [
                        {"case" : "remp4"},
                        {"case" : "ext8"}
					]
                }
            }`;

            $(document).ready(function() {
                var top       = $('#mapimage').offset().top;
                var left      = $('#mapimage').offset().left;
                var height    = $('#mapimage').height();
                var width     = $('#mapimage').width();

                var paper = Raphael(top, left, width, height);
                var theme = new Theme(debug);
                var conan = new Conan(paper, centerCoordonate, viewLine, debug, theme);
            });
        </script>
    </head>
    <body>
        <div>
            <img id="mapimage" src="./Forteresse.png" alt="" usemap="#map" />
            <map name="map" id="map">
                <area alt="" title="" href="#" shape="poly" id="ext1" coords="2,0,202,209,221,184,219,172,225,172,219,161,217,153,199,148,199,135,195,119,207,115,215,117,223,106,219,94,235,87,252,81,278,88,304,81,311,72,340,69,340,1" />
				<area alt="" title="" href="#" shape="poly" id="ext2" coords="342,2,341,69,754,67,788,31,817,14,908,12,908,2" />
				<area alt="" title="" href="#" shape="poly" id="ext3" coords="5,10,199,211,178,241,169,248,167,259,151,262,140,270,130,282,130,294,133,304,124,304,128,318,123,322,122,334,114,336,108,336,100,331,91,333,89,365,2,365" />
				<area alt="" title="" href="#" shape="poly" id="ext4" coords="3,368,88,368,86,635,69,668,57,704,53,738,0,737" />
				<area alt="" title="" href="#" shape="poly" id="ext5" coords="0,739,53,740,57,766,64,798,81,823,98,843,115,859,144,873,178,885,198,885,197,908,4,909" />
				<area alt="" title="" href="#" shape="poly" id="ext6" coords="198,888,198,909,908,908,908,903,841,895,811,877,793,858,299,851,271,871,242,883" />
				<area alt="" title="" href="#" shape="poly" id="ext7" coords="1054,762,1062,763,1061,908,910,909,910,904,946,894,978,886,1008,862,1037,816" />
				<area alt="" title="" href="#" shape="poly" id="ext8" coords="1051,156,1062,156,1061,761,1057,763,1051,732,1039,692,1026,664,1010,642,1007,638,990,623,993,614,1001,606,1006,587,1008,570,1003,563,999,550,987,539,982,528,978,517,980,290,1013,267,1031,243,1047,201" />
				<area alt="" title="" href="#" shape="poly" id="ext9" coords="908,2,909,10,932,15,959,23,981,39,1004,58,1023,82,1038,103,1045,130,1047,152,1062,153,1061,1" />
				<area alt="" title="" href="#" shape="poly" id="int1" coords="183,240,224,186,246,195,255,209,265,208,269,218,282,218,288,228,289,238,296,250,379,250,268,413,266,374,258,372,252,372,246,366,235,359,229,357,222,347,215,337,220,318,223,318,224,313,215,299,217,284,210,272,210,261,194,261" />
				<area alt="" title="" href="#" shape="poly" id="int2" coords="381,250,451,251,441,532,407,562,267,494,267,416" />
				<area alt="" title="" href="#" shape="poly" id="int3" coords="455,249,442,528,591,533,665,454,615,250" />
				<area alt="" title="" href="#" shape="poly" id="int4" coords="618,250,766,255,789,292,816,303,824,382,809,370,797,370,788,369,773,383,763,389,747,395,739,401,734,412,740,425,746,438,759,441,773,453,667,452" />
				<area alt="" title="" href="#" shape="poly" id="int5" coords="417,570,421,672,331,676,309,658,279,663,242,634,286,629,294,620,271,600,268,496" />
				<area alt="" title="" href="#" shape="poly" id="salle1" coords="446,574,443,673,633,672,598,564,470,549" />
				<area alt="" title="" href="#" shape="poly" id="salle2" coords="649,476,685,483,703,462,815,475,820,608,775,624,743,650,725,670,677,671,648,607,613,608,608,585,634,585,642,579,632,544,653,513,652,509,622,507" />
				<area alt="" title="" href="#" shape="poly" id="remp1" coords="330,85,327,97,322,107,318,118,331,120,331,126,330,135,321,138,327,146,328,151,328,156,325,165,321,173,327,176,330,183,314,184,347,202,356,218,359,232,562,235,563,84" />
				<area alt="" title="" href="#" shape="poly" id="remp2" coords="564,86,564,235,742,234,722,206,722,138,759,93" />
				<area alt="" title="" href="#" shape="poly" id="remp3" coords="845,456,951,456,956,304,928,308,913,308,904,292,875,292,876,305,846,301,844,408,835,405,838,444,841,442" />
				<area alt="" title="" href="#" shape="poly" id="remp4" coords="845,459,949,458,953,514,943,514,937,598,905,601,899,608,868,616,862,609,848,611,843,611" />
				<area alt="" title="" href="#" shape="poly" id="remp5" coords="553,689,553,833,750,825,729,785,731,739,726,735,740,695" />
				<area alt="" title="" href="#" shape="poly" id="remp6" coords="551,688,549,830,331,815,342,776,336,773,302,766,296,718,333,717,343,713,339,688" />
				<area alt="" title="" href="#" shape="poly" id="remp7" coords="101,492,252,489,256,592,205,578,195,596,134,609,130,598,103,622" />
				<area alt="" title="" href="#" shape="poly" id="remp8" coords="102,492,246,493,252,393,238,394,232,394,222,393,219,388,211,394,203,391,197,394,193,387,189,387,187,392,183,393,168,389,159,386,151,387,142,389,134,383,130,381,124,401,119,403,113,400,104,393" />
				<area alt="" title="" href="#" shape="poly" id="tour1" coords="727,140,768,139,785,98,810,63,846,40,896,40,928,52,969,83,803,253,790,236,775,203,759,200,727,196" />
				<area alt="" title="" href="#" shape="poly" id="tour2" coords="805,255,971,93,1002,146,1013,199,1004,235,978,257,959,274,940,283,919,290,876,292,839,285,815,270" />
				<area alt="" title="" href="#" shape="poly" id="tour3" coords="794,823,962,651,928,623,897,614,864,618,825,641,784,637,775,630,748,650,797,656,793,687,787,704,774,742,760,741,737,739,731,777,746,778,748,769,762,767" />
				<area alt="" title="" href="#" shape="poly" id="tour4" coords="853,764,877,735,890,743,918,744,982,680,999,708,1005,735,1015,764,1006,801,986,824,975,850,951,868,914,883,880,879,841,866,824,856,886,777,873,772,876,768" />
				<area alt="" title="" href="#" shape="poly" id="tour5" coords="93,668,142,729,178,757,207,759,274,834,239,858,149,845,125,817,92,773,84,728,88,699" />
				<area alt="" title="" href="#" shape="poly" id="tour6" coords="112,656,122,642,114,628,136,610,189,598,211,617,238,635,283,672,293,710,301,769,282,810,204,742,178,752,146,729,170,720" />
				<area alt="" title="" href="#" shape="poly" id="debris1" coords="202,125,207,120,217,123,227,123,222,113,230,110,225,101,228,97,235,101,240,96,247,91,255,86,261,92,272,92,279,90,296,93,312,88,326,90,316,98,315,109,314,117,316,125,326,123,319,128,324,132,319,136,319,144,321,149,320,158,317,169,316,175,325,178,311,181,306,183,341,207,341,214,349,217,349,227,354,231,296,233,294,223,289,220,285,211,272,213,263,204,258,208,255,191,247,191,234,186,226,186,226,174,235,175,231,162,226,166,223,162,220,144,207,147" />
				<area alt="" title="" href="#" shape="poly" id="debris2" coords="106,340,108,339,109,352,114,355,115,365,123,368,128,364,121,358,119,350,117,344,119,338,125,337,129,331,128,324,131,319,131,313,130,305,136,304,134,297,136,294,136,291,134,286,136,282,145,284,146,274,156,264,164,262,169,261,177,253,175,247,181,244,185,259,189,260,203,265,212,272,216,285,212,289,215,297,212,306,214,306,219,313,221,318,214,324,210,326,205,330,212,340,218,349,224,358,228,363,238,366,245,371,251,377,249,386,244,388,239,388,229,389,218,378,212,388,198,386,192,379,187,381,184,385,177,388,171,384,159,379,154,383,144,384,135,379,129,377,121,397,110,392" />
				<area alt="" title="" href="#" shape="poly" id="debris3" coords="745,403,745,398,755,397,766,395,770,390,780,388,782,378,792,372,800,376,807,378,813,389,820,390,822,387,825,400,828,408,832,413,832,420,835,429,835,438,836,442,829,435,825,441,821,446,811,432,805,432,806,438,806,447,805,452,791,448,785,450,776,445,773,444,772,433,765,432,761,428,760,438,756,439,751,429,751,420,751,415,742,418,740,415,743,407" />
				<area alt="" title="" href="#" shape="poly" id="debris4" coords="944,524,946,515,951,517,951,523,967,523,968,520,970,520,980,533,976,537,984,543,997,557,988,557,993,567,1000,566,1004,573,996,573,995,580,1002,584,999,587,996,587,993,592,993,597,999,598,997,604,990,603,989,609,976,602,974,607,964,601,961,608,952,604,942,596" />
			</map>
        </div>
    </body>
</html>